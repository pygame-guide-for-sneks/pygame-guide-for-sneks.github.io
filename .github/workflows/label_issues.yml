on: pull_request_review
name: Label approved pull requests
jobs:
  labelWhenApproved:
    name: Label when approved
    runs-on: ubuntu-latest
    steps:
    - name: Label when no reviews
      uses: pullreminders/label-when-approved-action@master
      env:
        APPROVALS: "0"
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        ADD_LABEL: "PR%3A%20Needs%20first%20approval"
    - name: Label when one review
      uses: pullreminders/label-when-approved-action@master
      env:
        APPROVALS: "1"
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        ADD_LABEL: "PR%3A%20Needs%20second%20approval"
        REMOVE_LABEL: "PR%3A%20Needs%20first%20approval"
    - name: Label when two reviews
      uses: pullreminders/label-when-approved-action@master
      env:
        APPROVALS: "2"
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        ADD_LABEL: "PR%3A%20Awaiting%20merge"
        REMOVE_LABEL: "PR%3A%20Needs%20second%20approval"
